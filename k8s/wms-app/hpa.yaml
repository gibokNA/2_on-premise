apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: wms-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: wms-app          # 6-2에서 만든 Deployment 이름과 같아야 함
  minReplicas: 2           # 최소 2개 유지
  maxReplicas: 10          # 최대 10개까지 확장
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 50  # CPU 사용량이 요청량(100m)의 50%를 넘으면 확장