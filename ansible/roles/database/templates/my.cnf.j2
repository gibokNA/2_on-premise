[mysqld]
# 1. 한글 깨짐 방지를 위한 기본 문자셋
character-set-server = utf8mb4
collation-server = utf8mb4_general_ci

# 2. 네트워크 설정
# 0.0.0.0으로 해야 외부(Web/WAS/Bastion)에서 접속가능
bind-address = 0.0.0.0
port = 3306

# 3. Replication(복제) 설정
log-bin = mysql-bin
relay-log = mysql-relay-bin

# Server ID 자동 생성
# IP 주소의 마지막 자리(예: 31, 32)를 가져와서 ID로 씀.
# 이렇게 하면 Master(31)와 Slave(32)가 자동으로 다른 ID를 갖게됨.
server-id = {{ ansible_default_ipv4.address.split('.')[-1] }}

# 4. 성능 튜닝 (간단하게)
max_connections = 100
innodb_buffer_pool_size = 256M